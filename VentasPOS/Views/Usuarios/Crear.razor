@page "/usuarios/crear"
@inject UsuarioCrearViewModel VM
@inject NavigationManager Nav

<GlobalCenterContainer>
    <Content>
        <h3 class="text-center"><span class="me-3">Crear usuario</span><PrimaryButton Text="Ver listado" OnClick="@(() => Nav.NavigateTo("/usuarios"))"></PrimaryButton></h3>

        <EditForm Model="@VM" OnValidSubmit="@VM.Guardar">
            <DataAnnotationsValidator />

            <MatCard Class="pa-4">

                <MatTextField @bind-Value="VM.Usuario.Nombre"
                              Label="Nombre"
                              Icon="person"
                              Required="true"
                              Class="mb-3" />

                <MatTextField @bind-Value="VM.Usuario.Correo"
                              Label="Correo"
                              Icon="email"
                              Type="email"
                              Required="true"
                              Class="mb-3" />

                <MatTextField @bind-Value="VM.Usuario.Clave"
                              Label="Contraseña"
                              Icon="lock"
                              Type="password"
                              Required="true"
                              Class="mb-3" />

                <MatSelect Label="Rol"
                           @bind-Value="VM.Usuario.Rol"
                           Required="true"
                           Class="mb-3">
                    <MatOption Value='"1"'>Admin</MatOption>
                    <MatOption Value='"2"'>Vendedor</MatOption>
                    <MatOption Value='"3"'>Cliente</MatOption>
                    <MatOption Value='"4"'>Proveedor</MatOption>
                </MatSelect>

                <MatDatePicker @bind-Value="VM.Usuario.FechaNacimiento"
                               Label="Fecha de nacimiento"
                               Class="mb-3" />

                <div class="d-flex justify-content-center align-items-center mt-3 mb-3">
                    <MatButton ButtonType="MatButtonType.Submit"
                               Raised="true"
                               Icon="save">
                        Guardar
                    </MatButton>
                </div>

                @if (!string.IsNullOrWhiteSpace(VM.Mensaje))
                {
                    <div class="alert alert-success">VM.Mensaje</div>
                }
            </MatCard>
        </EditForm>
    </Content>
</GlobalCenterContainer>
